{"version":3,"file":"commonHelpers.js","sources":["../src/js/common.js","../src/js/cat-api.js","../src/js/iziToast.js","../src/js/helpers.js","../src/js/slimSelect.js","../src/js/homeWork.js","../src/index.js"],"sourcesContent":["/**\r\n * API_KEY for https://thecatapi.com/\r\n *\r\n * @type {string}\r\n * @example const API_KEY =\r\n  'live_ZzU8YmZ7BGhDcZ8MoDPGW2AQRGZIcfWPEIZZjYxQWLV1MkJb0N7UBeYzQ3cB5Bs5';\r\n\r\n */\r\nexport const API_KEY =\r\n  'live_ZzU8YmZ7BGhDcZ8MoDPGW2AQRGZIcfWPEIZZjYxQWLV1MkJb0N7UBeYzQ3cB5Bs5';\r\n\r\n/**\r\n * BASE_URL for requests\r\n *\r\n * @type {string}\r\n * @example BASE_URL = 'https://api.thecatapi.com/v1'\r\n\r\n */\r\nexport const BASE_URL = 'https://api.thecatapi.com/v1';\r\n\r\n/**\r\n * Routes for requests \r\n * @date 1/20/2024 - 6:57:22 PM\r\n *\r\n * @type {{ fetchAll: string; fetchCat: string; }}\r\n * @example const routes = {\r\n  fetchAll: '/breeds',\r\n  fetchCat: '/images/search?breed_ids=',\r\n};\r\n */\r\nexport const routes = {\r\n  fetchAll: '/breeds',\r\n  fetchCat: '/images/search?breed_ids=',\r\n};\r\n\r\n/**\r\n * Class for hide elements\r\n *\r\n * @type {string}\r\n * @example const HIDDEN_CLASS = 'visually-hidden';\r\n */\r\nexport const HIDDEN_CLASS = 'visually-hidden';\r\n\r\n/**\r\n * References Object\r\n *\r\n * @type {{ select: HTMLElement | null; selectWrapper: HTMLElement | null; loader: HTMLElement | null; catInfo: HTMLElement | null; }}\r\n *  @property {HTMLElement} select - HTML Element select\r\n * @property {HTMLElement} selectWrapper - HTML Element wrapper for select\r\n * @property {HTMLElement} loader -HTML Element loader\r\n * @property {HTMLElement} catInfo -HTML Element cat info box\r\n * @example const ref = {\r\n  select: document.querySelector('.breed-select'),\r\n  selectWrapper: document.querySelector('.select-wrapper'),\r\n  loader: document.querySelector('.loader-wrapper'),\r\n  catInfo: document.querySelector('.cat-info'),\r\n};\r\n */\r\nexport const ref = {\r\n  select: document.querySelector('.breed-select'),\r\n  selectWrapper: document.querySelector('.select-wrapper'),\r\n  loader: document.querySelector('.loader-wrapper'),\r\n  catInfo: document.querySelector('.cat-info'),\r\n};\r\n","import axios from 'axios';\r\nimport { API_KEY, BASE_URL, routes } from './common';\r\n\r\n/**\r\n * Default API_KEY for Axios\r\n */\r\naxios.defaults.headers.common['x-api-key'] = API_KEY;\r\n/**\r\n * Default URL for Axios\r\n */\r\naxios.defaults.baseURL = BASE_URL;\r\n\r\n/**\r\n * Get all breeds\r\n *\r\n *\r\n * @export\r\n * @returns {Promise}\r\n * @example function fetchBreeds() {\r\n  return axios(routes.fetchAll);\r\n\r\n */\r\nexport function fetchBreeds() {\r\n  return axios(routes.fetchAll);\r\n}\r\n\r\n/**\r\n * Get breed info\r\n *\r\n *\r\n * @export\r\n * @returns {Promise}\r\n * @example function fetchBreeds() {\r\n  return axios(routes.fetchAll);\r\n\r\n */\r\nexport function fetchCatByBreed(breedId) {\r\n  return axios({\r\n    url: `${routes.fetchCat}${breedId}`,\r\n  });\r\n}\r\n","//Import\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\n/**\r\n * Delay time for iziToast error message\r\n *\r\n * @type {Number} - time in milliseconds\r\n * @example const DELAY_TIME = 3000;\r\n */\r\nconst DELAY_TIME = 3000;\r\n\r\n/**\r\n * Settings for iziToast \r\n * \r\n * @type {{ title: string; timeout: number; position: string; message: string; }}\r\n * @example const iziToastSettings = {\r\n  title: 'Error',\r\n  timeout: DELAY_TIME,\r\n  position: 'topCenter',\r\n  message: 'Oops! Something went wrong! Try reloading the page!',\r\n};\r\n*\r\n* @description Read more about iziToast settings at https://izitoast.marcelodolza.com/\r\n */\r\nconst iziToastSettings = {\r\n  title: 'Error',\r\n  timeout: DELAY_TIME,\r\n  position: 'topCenter',\r\n  message: 'Oops! Something went wrong! Try reloading the page!',\r\n};\r\n\r\n/**\r\n * Show iziToast error message\r\n *\r\n * @export function\r\n * @example function errorToast() {\r\n  iziToast.error(iziToastSettings);\r\n}\r\n*@description Read more about iziToast settings at https://izitoast.marcelodolza.com/\r\n */\r\nexport function errorToast() {\r\n  iziToast.error(iziToastSettings);\r\n}\r\n","//Import\r\nimport { ref, HIDDEN_CLASS } from './common';\r\nimport { errorToast } from './iziToast';\r\n\r\n/**\r\n * Remove class visually-hidden from element\r\n *\r\n * @param {HTMLElement} el - HTMLElement\r\n * @example function visibleElement(el) {\r\n  el.classList.remove(HIDDEN_CLASS);\r\n}\r\n */\r\nexport function visibleElement(el) {\r\n  el.classList.remove(HIDDEN_CLASS);\r\n}\r\n/**\r\n * Add class visually-hidden to element\r\n *\r\n * @param {HTMLElement} el - HTMLElement\r\n * @example function hiddenElement(el) {\r\n  el.classList.add(HIDDEN_CLASS);\r\n}\r\n */\r\nexport function hiddenElement(el) {\r\n  el.classList.add(HIDDEN_CLASS);\r\n}\r\n\r\n/**\r\n * Create markup amd insert markup into info box \r\n * \r\n * @export\r\n * @param {{ url: String; name: String; description: String; temperament: String; }} param0 - object\r\n * @param {String} param0.url - source address for image\r\n * @param {String} param0.name - name of selected breed\r\n * @param {String} param0.description - description of selected breed\r\n * @param {String} param0.temperament - temperament text of selected breed\r\n * @example function createInfoMarkup({ url, name, description, temperament }) {\r\n  const markup = `<div class=\"cat-info-thumb\">\r\n    <img src=\"${url}\" alt=\"${name} lazy-loading\" />\r\n    </div><div class=\"cat-info-wrapper\">\r\n     <h1 class=\"cat-info-title\">${name}</h1>\r\n     <p class=\"cat-info-description\">${description}</p>\r\n     <p class=\"cat-info-behavior\"> <span class=\"cat-info-behavior-accent\">Temperament: </span>${temperament}</p>\r\n     </div>`;\r\n  ref.catInfo.innerHTML = markup;//insert markup \r\n}\r\n */\r\nexport function createInfoMarkup({ url, name, description, temperament }) {\r\n  const markup = `<div class=\"cat-info-thumb\">\r\n    <img src=\"${url}\" alt=\"${name} lazy-loading\" />\r\n    </div><div class=\"cat-info-wrapper\">\r\n     <h1 class=\"cat-info-title\">${name}</h1>\r\n     <p class=\"cat-info-description\">${description}</p>\r\n     <p class=\"cat-info-behavior\"> <span class=\"cat-info-behavior-accent\">Temperament: </span>${temperament}</p>\r\n     </div>`;\r\n  ref.catInfo.innerHTML = markup; //insert markup\r\n}\r\n\r\n/**\r\n * Check if response status equal status 200\r\n *\r\n * @export\r\n * @param {Object} response - response from server\r\n * @returns {Object}\r\n * @example function checkResponseStatus(response) {\r\n  if (response.status !== 200) throw new Error(response.status);\r\n  return response.data;\r\n}\r\n */\r\nexport function checkResponseStatus(response) {\r\n  if (response.status !== 200) throw new Error(response.status);\r\n  return response.data;\r\n}\r\n\r\n/**\r\n * Hide loader, show iziToast error message and print in console error object\r\n * \r\n * @export\r\n * @param {Error} err - Object error\r\n * @example function errorFunction(err) {\r\n  hiddenElement(ref.loader); //hide loader\r\n  errorToast();//show iziToast error\r\n  console.log(err);//print in console error object\r\n}\r\n */\r\nexport function errorFunction(err) {\r\n  hiddenElement(ref.loader); //hide loader\r\n  errorToast(); //show iziToast error\r\n  console.log(err); //print in console error object\r\n}\r\n\r\n/**\r\n * Change input Array with data into correct Array for slimSelect\r\n *\r\n * @export\r\n * @param {Array} data - response from server\r\n * @returns {Array}\r\n * @example function prepareMainData(data) {\r\n  return data.map(({ id: value, name: text }) => ({\r\n    text,\r\n    value,\r\n  }));\r\n}\r\n */\r\nexport function prepareMainData(data) {\r\n  return data.map(({ id: value, name: text }) => ({\r\n    text,\r\n    value,\r\n  }));\r\n}\r\n\r\n/**\r\n * Change input Data into correct data  for cat info box\r\n *\r\n * @export\r\n * @param {Array} data\r\n * @returns {{ url: string; name: string; description: string; temperament: string; }}\r\n * @example unction prepareCatInfo(data) {\r\n  const { breeds, url } = data[0];\r\n  const { name, description, temperament } = breeds[0];\r\n  return { url, name, description, temperament };\r\n}\r\n */\r\nexport function prepareCatInfo(data) {\r\n  const { breeds, url } = data[0];\r\n  const { name, description, temperament } = breeds[0];\r\n  return { url, name, description, temperament };\r\n}\r\n","import SlimSelect from 'slim-select';\r\nimport { fetchCatByBreed } from './cat-api';\r\nimport {\r\n  checkResponseStatus,\r\n  visibleElement,\r\n  hiddenElement,\r\n  createInfoMarkup,\r\n  prepareCatInfo,\r\n  errorFunction,\r\n} from './helpers';\r\nimport { ref } from './common';\r\n\r\n/**\r\n * Default value for first option in select\r\n *\r\n * @type {string}\r\n * @example const DEFAULT_VALUE = 'placeholder';\r\n */\r\nconst DEFAULT_VALUE = 'placeholder';\r\n\r\n/**\r\n * Base settings fro slimSelect\r\n *\r\n * @type {{ select: string; settings: { placeholderText: string; }; events: { beforeChange: () => void; afterChange: (newVal: any) => void; }; }}\r\n * @description  Read more about slimSelect settings at https://slimselectjs.com/\r\n * @example const selectSettings = {\r\n  select: `.breed-select`,\r\n  settings: {\r\n    placeholderText: 'Select breed',\r\n  },\r\n  events: {\r\n    beforeChange: () => {\r\n      visibleElement(ref.loader), // visible loader\r\n        hiddenElement(ref.selectWrapper), // hide select\r\n        hiddenElement(ref.catInfo); //hide cat info box\r\n    },\r\n    afterChange: newVal => {\r\n      const { value } = newVal[0];\r\n\r\n      if (value === DEFAULT_VALUE) return; // check  first value\r\n\r\n      fetchCatByBreed(value) //get breed info\r\n        .then(checkResponseStatus) // check response status\r\n        .then(prepareCatInfo) // prepare  breed info\r\n        .then(createInfoMarkup) // create and insert markup\r\n        .then(() => {\r\n          hiddenElement(ref.loader); // hide loader\r\n          visibleElement(ref.selectWrapper); //visible select\r\n          visibleElement(ref.catInfo); // visible cat info box\r\n        }) \r\n        .catch(errorFunction); // error function\r\n    },\r\n  },\r\n};\r\n */\r\nconst selectSettings = {\r\n  select: `.breed-select`,\r\n  settings: {\r\n    placeholderText: 'Select breed',\r\n  },\r\n  events: {\r\n    beforeChange: () => {\r\n      visibleElement(ref.loader), // visible loader\r\n        hiddenElement(ref.selectWrapper), // hide select\r\n        hiddenElement(ref.catInfo); //hide cat info box\r\n    },\r\n    afterChange: newVal => {\r\n      const { value } = newVal[0];\r\n\r\n      if (value === DEFAULT_VALUE) return; // check  first value\r\n\r\n      fetchCatByBreed(value) //get breed info\r\n        .then(checkResponseStatus) // check response status\r\n        .then(prepareCatInfo) // prepare  breed info\r\n        .then(createInfoMarkup) // create and insert markup\r\n        .then(() => {\r\n          hiddenElement(ref.loader); // hide loader\r\n          visibleElement(ref.selectWrapper); //visible select\r\n          visibleElement(ref.catInfo); // visible cat info box\r\n        })\r\n        .catch(errorFunction); // error function\r\n    },\r\n  },\r\n};\r\n\r\n/**\r\n * new slimSelect\r\n *\r\n * @type {new SlimSelect} - new slimSelect\r\n * @example const select = new SlimSelect(selectSettings);\r\n\r\n */\r\nexport const select = new SlimSelect(selectSettings);\r\n\r\n/**\r\n *  Add first disabled value for selector\r\n *\r\n * @export\r\n * @param {Array} data - response from server\r\n * @returns {Array}\r\n * @example function addDefaultValue(data) {\r\n  return [\r\n    { value: `${DEFAULT_VALUE}`, text: 'Select Breed', display: false },\r\n    ...data,\r\n  ];\r\n}\r\n */\r\nexport function addDefaultValue(data) {\r\n  return [\r\n    { value: `${DEFAULT_VALUE}`, text: 'Select Breed', display: false },\r\n    ...data,\r\n  ];\r\n}\r\n","//Import\r\nimport { ref } from './common';\r\nimport { fetchBreeds } from './cat-api';\r\nimport {\r\n  hiddenElement,\r\n  visibleElement,\r\n  checkResponseStatus,\r\n  errorFunction,\r\n  prepareMainData,\r\n} from './helpers';\r\nimport { select, addDefaultValue } from './slimSelect';\r\n//------------------------------------------------\r\n//Export\r\n\r\n/**\r\n * Home work\r\n * @export\r\n * @example   function homeWork() {\r\n  visibleElement(ref.loader); // start loader\r\n  hiddenElement(ref.select); // hide select\r\n\r\n  fetchBreeds() // get breeds\r\n    .then(checkResponseStatus) //check status\r\n    .then(prepareMainData) //prepare data \r\n    .then(addDefaultValue) // add default value\r\n    .then(newData => {\r\n      setTimeout(() => {\r\n        hiddenElement(ref.loader); // hide loader\r\n        visibleElement(ref.select); // visible select\r\n      }, 500);\r\n      select.setData(newData); //set data\r\n    })\r\n    .catch(errorFunction); // error\r\n}\r\n\r\n */\r\nexport function homeWork() {\r\n  visibleElement(ref.loader); // start loader\r\n  hiddenElement(ref.select); // hide select\r\n\r\n  fetchBreeds() // get breeds\r\n    .then(checkResponseStatus) //check status\r\n    .then(prepareMainData) //prepare data\r\n    .then(addDefaultValue) // add default value\r\n    .then(newData => {\r\n      setTimeout(() => {\r\n        hiddenElement(ref.loader); // hide loader\r\n        visibleElement(ref.select); // visible select\r\n      }, 500);\r\n      select.setData(newData); //set data\r\n    })\r\n    .catch(errorFunction); // error\r\n}\r\n","//Import\r\nimport { homeWork } from './js/homeWork';\r\n//------------------------------------------------\r\n//Main function\r\nhomeWork();\r\n"],"names":["API_KEY","BASE_URL","routes","HIDDEN_CLASS","ref","axios","fetchBreeds","fetchCatByBreed","breedId","DELAY_TIME","iziToastSettings","errorToast","iziToast","visibleElement","el","hiddenElement","createInfoMarkup","url","name","description","temperament","markup","checkResponseStatus","response","errorFunction","err","prepareMainData","data","value","text","prepareCatInfo","breeds","DEFAULT_VALUE","selectSettings","newVal","select","SlimSelect","addDefaultValue","homeWork","newData"],"mappings":"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"}