{"version":3,"file":"commonHelpers.js","sources":["../src/js/common.js","../src/js/cat-api.js","../src/js/helpers.js","../src/index.js"],"sourcesContent":["export const API_KEY =\r\n  'live_ZzU8YmZ7BGhDcZ8MoDPGW2AQRGZIcfWPEIZZjYxQWLV1MkJb0N7UBeYzQ3cB5Bs5';\r\nexport const BREEDS_URL = 'https://api.thecatapi.com/v1/breeds';\r\nexport const SEARCH_URL =\r\n  'https://api.thecatapi.com/v1/images/search?breed_ids=';\r\nexport const HIDDEN_CLASS = 'visually-hidden';\r\n1;\r\n\r\nexport const ref = {\r\n  select: document.querySelector('.breed-select'),\r\n  loader: document.querySelector('.loader'),\r\n  error: document.querySelector('.error'),\r\n  catInfo: document.querySelector('.cat-info'),\r\n};\r\n","import axios from 'axios';\r\nimport { API_KEY, BREEDS_URL, SEARCH_URL } from './common';\r\naxios.defaults.headers.common['x-api-key'] = API_KEY;\r\n\r\nexport function fetchBreeds() {\r\n  return axios({\r\n    url: BREEDS_URL,\r\n  }).then(res => {\r\n    if (res.status !== 200) throw new Error(res.status);\r\n    return res.data;\r\n  });\r\n}\r\n\r\nexport function fetchCatByBreed(breedId) {\r\n  return axios({\r\n    url: `${SEARCH_URL}${breedId}`,\r\n  }).then(res => {\r\n    if (res.status !== 200) throw new Error(res.status);\r\n    return res.data;\r\n  });\r\n}\r\n","import { ref, HIDDEN_CLASS } from './common';\r\n\r\nexport function hiddenElement(...attributes) {\r\n  [...attributes].forEach(el => el.classList.add(HIDDEN_CLASS));\r\n}\r\nexport function visibleElement(...attributes) {\r\n  [...attributes].forEach(el => el.classList.remove(HIDDEN_CLASS));\r\n}\r\n\r\nexport function createSelect(data) {\r\n  const markup = createSelectOptions(data);\r\n  insertSelectOptions(markup);\r\n}\r\n\r\nfunction insertSelectOptions(markup) {\r\n  ref.select.insertAdjacentHTML('afterbegin', markup);\r\n}\r\nfunction createSelectOptions(data) {\r\n  return data.map(({ id, name }) => createSelectOpt(id, name)).join();\r\n}\r\nfunction createSelectOpt(id, text) {\r\n  return `<option value=${id}>${text}</option>`;\r\n}\r\n\r\nexport function createInfoMarkup({ url, name, description, temperament }) {\r\n  const markup = `<div class=\"cat-info-thumb\">\r\n    <img src=\"${url}\" alt=\"${name} lazy-loading\" />\r\n    </div><div class=\"cat-info-wrapper\">\r\n     <h1 class=\"cat-info-title\">${name}</h1>\r\n     <p class=\"cat-info-description\">${description}</p>\r\n     <p class=\"cat-info-behavior\"> <span class=\"cat-info-behavior-accent\">Temperament: </span>${temperament}</p>\r\n     </div>`;\r\n  ref.catInfo.innerHTML = markup;\r\n}\r\n","import { fetchBreeds, fetchCatByBreed } from './js/cat-api';\r\nimport { ref } from './js/common';\r\nimport {\r\n  createSelect,\r\n  hiddenElement,\r\n  visibleElement,\r\n  createInfoMarkup,\r\n} from './js/helpers';\r\n\r\n//--------------------------------------------------------------------\r\n\r\nhomeWork();\r\n\r\nref.select.addEventListener('change', handlerChange);\r\n\r\n//--------------------------------------------------------------------\r\nfunction handlerChange(e) {\r\n  visibleElement(ref.loader);\r\n  hiddenElement(ref.catInfo, ref.error);\r\n\r\n  fetchCatByBreed(e.currentTarget.value)\r\n    .then(data => {\r\n      hiddenElement(ref.loader);\r\n      const { breeds, url } = data[0];\r\n      const { name, description, temperament } = breeds[0];\r\n      return { url, name, description, temperament };\r\n    })\r\n    .then(info => {\r\n      createInfoMarkup(info);\r\n      visibleElement(ref.catInfo);\r\n    })\r\n    .catch(err => {\r\n      hiddenElement(ref.loader);\r\n      isibleElement(ref.error);\r\n      console.log(err);\r\n    });\r\n}\r\n//--------------------------------------------------------------------\r\nfunction homeWork() {\r\n  visibleElement(ref.loader);\r\n\r\n  fetchBreeds()\r\n    .then(data => {\r\n      hiddenElement(ref.loader);\r\n      visibleElement(ref.select);\r\n      createSelect(data);\r\n    })\r\n    .catch(err => {\r\n      hiddenElement(ref.loader);\r\n      visibleElement(ref.error);\r\n      console.log(err);\r\n    });\r\n}\r\n"],"names":["API_KEY","BREEDS_URL","SEARCH_URL","HIDDEN_CLASS","ref","axios","fetchBreeds","res","fetchCatByBreed","breedId","hiddenElement","attributes","el","visibleElement","createSelect","data","markup","createSelectOptions","insertSelectOptions","id","name","createSelectOpt","text","createInfoMarkup","url","description","temperament","homeWork","handlerChange","breeds","info","err"],"mappings":"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"}